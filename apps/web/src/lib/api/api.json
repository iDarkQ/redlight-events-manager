{"openapi":"3.0.0","paths":{"/user/signUp":{"post":{"operationId":"UserController_signUp","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"JWT Token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JwtTokenDto"}}}},"409":{"description":"User with this email, username, or credentials already exists"}},"tags":["User"]}},"/user/signIn":{"post":{"operationId":"UserController_signIn","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserDto"}}}},"responses":{"200":{"description":"JWT Token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JwtTokenDto"}}}},"401":{"description":"Provided password was wrong"},"404":{"description":"User with this email does not exist"}},"tags":["User"]}},"/user/auth":{"post":{"operationId":"UserController_authorize","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JwtTokenDto"}}}},"responses":{"200":{"description":"Returns user object","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"404":{"description":"This user does not exists"}},"tags":["User"]}},"/user":{"get":{"operationId":"UserController_fetchAll","parameters":[],"responses":{"200":{"description":"Returns all existing users","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ParticipantDto"}}}}},"401":{"description":"You are not an admin"}},"security":[{"bearer":[]}],"tags":["User"]}},"/user/role/{id}":{"patch":{"operationId":"UserController_updateRole","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRoleDto"}}}},"responses":{"200":{"description":"Returns the updated user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"401":{"description":"You are not an admin"},"404":{"description":"This user does not exist"},"409":{"description":"You can't change role of the default admin"}},"security":[{"bearer":[]}],"tags":["User"]}},"/user/ban/{id}":{"patch":{"operationId":"UserController_banUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BanUserDto"}}}},"responses":{"200":{"description":"Returns the updated user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"401":{"description":"You need to be admin to do it"}},"security":[{"bearer":[]}],"tags":["User"]}},"/user/profile":{"patch":{"operationId":"UserController_update","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileDto"}}}},"responses":{"200":{"description":"Returns user object","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}},"security":[{"bearer":[]}],"tags":["User"]}},"/user/profile/picture":{"post":{"operationId":"UserController_uploadProfilePhoto","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"photo":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"Successfully uploaded file","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadBannerResponse"}}}},"400":{"description":"File upload failed"}},"security":[{"bearer":[]}],"tags":["User"]}},"/event":{"post":{"operationId":"EventController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEventRequestDto"}}}},"responses":{"201":{"description":"Creates and returns new event","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventDto"}}}}},"security":[{"bearer":[]}],"tags":["Event"]},"get":{"operationId":"EventController_findAll","parameters":[],"responses":{"200":{"description":"Returns all existing events","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EventDto"}}}}}},"tags":["Event"]}},"/event/{id}":{"get":{"operationId":"EventController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Returns specific event based on id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventDto"}}}}},"tags":["Event"]},"put":{"operationId":"EventController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateEventDto"}}}},"responses":{"200":{"description":"Updates event by id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventDto"}}}},"403":{"description":"Only admins can edit events from other users"},"404":{"description":"Event does not exist"}},"security":[{"bearer":[]}],"tags":["Event"]},"delete":{"operationId":"EventController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully deleted event"},"401":{"description":"You don't own this event"},"404":{"description":"Event does not exist"}},"security":[{"bearer":[]}],"tags":["Event"]}},"/event/join/{id}":{"patch":{"operationId":"EventController_join","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"User joined selected event","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventDto"}}}},"400":{"description":"Already part of event"},"404":{"description":"Event does not exist"},"409":{"description":"Event is full"}},"security":[{"bearer":[]}],"tags":["Event"]}},"/event/leave/{id}":{"patch":{"operationId":"EventController_leave","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"userId","required":false,"in":"query","description":"Unique identifier of the user","schema":{"example":"ckv9p34s50000svef8bl7w2gb","type":"string"}}],"responses":{"200":{"description":"User left selected event","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventDto"}}}},"400":{"description":"Creator cannot leave its own event or Not part of event"},"403":{"description":"Only admins can remove other users from an event"},"404":{"description":"Event does not exist"},"409":{"description":"Event is already completed"}},"security":[{"bearer":[]}],"tags":["Event"]}},"/event/photo":{"post":{"operationId":"EventController_uploadEventPhoto","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"photo":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"Successfully uploaded file","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadBannerResponse"}}}},"400":{"description":"File upload failed"}},"security":[{"bearer":[]}],"tags":["Event"]}}},"info":{"title":"Redlight Events Manager","description":"The API used for handling sport events at redlight","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CreateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"User's full name.","example":"John Doe","minLength":2,"maxLength":50},"email":{"type":"string","description":"User's email address.","example":"john.doe@example.com","format":"email"},"password":{"type":"string","description":"User's account password.\nMust be between 6 and 100 characters.","example":"securePassword123","minLength":6,"maxLength":100},"birthday":{"format":"date-time","type":"string","description":"User's date of birth.\nISO 8601 date format.","example":"1990-05-15T00:00:00.000Z"}},"required":["name","email","password","birthday"]},"JwtTokenDto":{"type":"object","properties":{"token":{"type":"string","description":"A unique token for user authentication","example":"xxxxx.yyyyy.zzzzz"}},"required":["token"]},"LoginUserDto":{"type":"object","properties":{"email":{"type":"string","description":"User's email address.","example":"john.doe@example.com","format":"email"},"password":{"type":"string","description":"User's account password.\nMust be between 6 and 100 characters.","example":"securePassword123","minLength":6,"maxLength":100}},"required":["email","password"]},"UserRole":{"type":"string","enum":["ADMIN","PARTICIPANT"],"description":"Role of the user"},"UserDto":{"type":"object","properties":{"role":{"description":"Role of the user","example":"PARTICIPANT","allOf":[{"$ref":"#/components/schemas/UserRole"}]},"id":{"type":"string","description":"Unique identifier of the user","example":"cmcoyn1ld000008l4c8icbq3s"},"name":{"type":"string","description":"Name of the user","example":"John Doe"},"email":{"type":"string","description":"Email address of the user","example":"john.doe@example.com","format":"email"},"banned":{"type":"boolean","description":"Determins whether user is banned","example":"TRUE"},"profile":{"type":"string","nullable":true,"description":"Profile description or URL of the user","example":"static/uploads/permanent/event-123-123.png"},"birthday":{"format":"date-time","type":"string","description":"Birthday of the user","example":"1990-01-01T00:00:00.000Z"}},"required":["role","id","name","email","banned","profile","birthday"]},"ParticipantDto":{"type":"object","properties":{"role":{"description":"Role of the user","example":"PARTICIPANT","allOf":[{"$ref":"#/components/schemas/UserRole"}]},"id":{"type":"string","description":"Unique identifier of the user","example":"cmcoyn1ld000008l4c8icbq3s"},"name":{"type":"string","description":"Name of the user","example":"John Doe"},"profile":{"type":"string","nullable":true,"description":"Profile description or URL of the user","example":"static/uploads/permanent/event-123-123.png"},"banned":{"type":"boolean","description":"Determins whether user is banned","example":"TRUE"}},"required":["role","id","name","profile","banned"]},"UpdateRoleDto":{"type":"object","properties":{"role":{"description":"Role of the user","example":"PARTICIPANT","allOf":[{"$ref":"#/components/schemas/UserRole"}]}},"required":["role"]},"BanUserDto":{"type":"object","properties":{"banned":{"type":"boolean","description":"Determins whether user is banned","example":"TRUE"}},"required":["banned"]},"UpdateProfileDto":{"type":"object","properties":{"birthday":{"format":"date-time","type":"string","description":"Birthday of the user","example":"1990-01-01T00:00:00.000Z"},"profile":{"type":"string","nullable":true,"description":"Profile description or URL of the user","example":"static/uploads/permanent/event-123-123.png"}},"required":["birthday","profile"]},"UploadBannerResponse":{"type":"object","properties":{"fileUrl":{"type":"string","description":"A link for event banner","example":"/static/uploads/permanent/event-123-123.png"}}},"EventStatus":{"type":"string","enum":["PLANNED","COMPLETED","CANCELLED"],"description":"Status of the event"},"CreateEventRequestDto":{"type":"object","properties":{"status":{"description":"Status of the event","example":"PLANNED","allOf":[{"$ref":"#/components/schemas/EventStatus"}]},"title":{"type":"string","description":"Title of the event","example":"Annual Meetup"},"description":{"type":"string","description":"Description of the event","example":"A gathering for all members."},"date":{"format":"date-time","type":"string","description":"Date when event happens","example":"2024-07-01T18:00:00.000Z"},"type":{"type":"string","description":"Type of the event","example":"Football"},"maxParticipants":{"type":"number","description":"Maximum number of participants","example":100},"longitude":{"type":"number","description":"Longitude of the event location","example":19.9449799},"latitude":{"type":"number","description":"Latitude of the event location","example":50.0646501},"location":{"type":"string","description":"Name of the event location"},"banner":{"type":"string","nullable":true,"description":"Link to the event banner","example":"/static/uploads/permanent/banners/event-123-123.png"}},"required":["status","title","description","date","type","maxParticipants","longitude","latitude","location","banner"]},"EventDto":{"type":"object","properties":{"participants":{"example":[{"id":"user1","name":"Alice","profile":"static/uploads/permanent/event-123-123.png","role":"ADMIN"},{"id":"user2","name":"Bob","profile":"static/uploads/permanent/event-123-123.png","role":"PARTICIPANT"}],"type":"array","items":{"$ref":"#/components/schemas/ParticipantDto"}},"status":{"description":"Status of the event","example":"PLANNED","allOf":[{"$ref":"#/components/schemas/EventStatus"}]},"id":{"type":"string","description":"Unique identifier of the event","example":"ckv9p34s50000svef8bl7w2gb"},"title":{"type":"string","description":"Title of the event","example":"Annual Meetup"},"description":{"type":"string","description":"Description of the event","example":"A gathering for all members."},"createdAt":{"format":"date-time","type":"string","description":"Date when the event was created","example":"2024-06-25T12:00:00.000Z"},"date":{"format":"date-time","type":"string","description":"Date when event happens","example":"2024-07-01T18:00:00.000Z"},"type":{"type":"string","description":"Type of the event","example":"Football"},"maxParticipants":{"type":"number","description":"Maximum number of participants","example":100},"creatorId":{"type":"string","description":"ID of the event creator","example":"ckv9p34s50000svef8bl7w2gb"},"longitude":{"type":"number","description":"Longitude of the event location","example":19.9449799},"latitude":{"type":"number","description":"Latitude of the event location","example":50.0646501},"location":{"type":"string","description":"Name of the event location"},"deleted":{"type":"boolean","description":"Is event soft deleted","example":false},"deletedAt":{"format":"date-time","type":"string","nullable":true,"description":"Deletion date","example":"2024-07-01T18:00:00.000Z"},"banner":{"type":"string","nullable":true,"description":"Link to the event banner","example":"/static/uploads/permanent/banners/event-123-123.png"}},"required":["participants","status","id","title","description","createdAt","date","type","maxParticipants","creatorId","longitude","latitude","location","deleted","deletedAt","banner"]},"UpdateEventDto":{"type":"object","properties":{"status":{"description":"Status of the event","example":"PLANNED","allOf":[{"$ref":"#/components/schemas/EventStatus"}]},"title":{"type":"string","description":"Title of the event","example":"Annual Meetup"},"description":{"type":"string","description":"Description of the event","example":"A gathering for all members."},"date":{"format":"date-time","type":"string","description":"Date when event happens","example":"2024-07-01T18:00:00.000Z"},"type":{"type":"string","description":"Type of the event","example":"Football"},"maxParticipants":{"type":"number","description":"Maximum number of participants","example":100},"longitude":{"type":"number","description":"Longitude of the event location","example":19.9449799},"latitude":{"type":"number","description":"Latitude of the event location","example":50.0646501},"location":{"type":"string","description":"Name of the event location"},"banner":{"type":"string","nullable":true,"description":"Link to the event banner","example":"/static/uploads/permanent/banners/event-123-123.png"}}}}}}